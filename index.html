<!DOCTYPE html>
<html>
<head>
<link href="http://fonts.googleapis.com/css?family=Philosopher:400,700" rel="stylesheet" type="text/css">
<link href="http://metroui.org.ua/css/modern.css" rel="stylesheet" />
<link href="http://metroui.org.ua/css/modern-responsive.css" rel="stylesheet" />
<script src="socket.io/socket.io.js"></script>
<script src="http://code.jquery.com/jquery-1.4.4.min.js"></script>
<script src="http://metroui.org.ua/js/modern/dialog.js" type="text/javascript"></script>
<script src="http://metroui.org.ua/js/modern/dropdown.js" type="text/javascript"></script>
<script src="http://metroui.org.ua/js/modern/input-control.js" type="text/javascript"></script>
</head>
<body class="metrouicss">
<div class="page secondary bg-color-blueLight">
	<div class="page-header bg-color-blue">
		<div class="page-header-content">
			<h1 class="fg-color-white">Front Desk</h1>
			<div class="nav-bar bg-color-blue topnavbar">
				<div class="nav-bar-inner">
					
					<span class="element brand">
						<img class="place-left" src="http://metroui.org.ua/images/logo32.png" style="height:20px"/>Navigation
					</span>
					
					<span class="divider"></span>
					<ul class="menu">
						<li><a href="#">Home</a></li>
						<li data-role="dropdown">
							<a href="#">Video Streams</a>
							<ul class="dropdown-menu">
								<li><a>Front Door</a></li>
								<li><a>Carport</a></li>
								<li><a>Northern Entry</a></li>
								<li><a>Backyard</a></li>
							</ul>
						</li>
						<li class="divider"></li>
						<li><a>Settings</a></li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	<div class="page-region bg-color-blueLight">
		<div class="page-region-content">
			<div class="row padding10"> <!-- sensors -->
				<h2>Relays</h2> <p> <span id="txtConnectionStatus">Connection message goes here.</span> <span id="txtStatusMessage">Status text goes here.</span></p>
				<div id="stateb1" class="tile bg-color-red state" relay="1">
					<div class="tile-content">
						<h3>One</h2>
						<h4>Current state: <span id="stater1">Off</span></h4>
						<p>
							<label class="input-control switch">
								<input type="checkbox" class="checkControl">
								<span class="helper">Control</span>
							</label>
						</p>
					</div>
					<div class="brand">
						<div class="badge">1</div>
					</div>
				</div>
				<div id="stateb2" class="tile bg-color-red state" data-relay="2">
					<div class="tile-content">
						<h3>Two</h2>
						<h4>Current state: <span id="stater2">Off</span></h4>
						<p><em>Disconnected</em></p>
					</div>
					<div class="brand">
						<div class="badge">2</div>
					</div>
				</div>
				<div id="stateb3" class="tile bg-color-red state" relay="3">
					<div class="tile-content">
						<h3>Three</h2>
						<h4>Current state: <span id="stater3">Off</span></h4>
						<p><em>Disconnected</em></p>
					</div>
					<div class="brand">
						<div class="badge">3</div>
					</div>
				</div>
				<div id="stateb4" class="tile bg-color-red state" relay="4">
					<div class="tile-content">
						<h3>Four</h2>
						<h4>Current state: <span id="stater4">Off</span></h4>
						<p><em>Disconnected</em></p>
					</div>
					<div class="brand">
						<div class="badge">4</div>
					</div>
				</div>
				<div id="stateb5" class="tile bg-color-red state" relay="5">
					<div class="tile-content">
						<h3>Five</h2>
						<h4>Current state: <span id="stater5">Off</span></h4>
						<p><em>Disconnected</em></p>
					</div>
					<div class="brand">
						<div class="badge">5</div>
					</div>
				</div>
				<div id="stateb6" class="tile bg-color-red state" relay="6">
					<div class="tile-content">
						<h3>Six</h2>
						<h4>Current state: <span id="stater6">Off</span></h4>
						<p><em>Disconnected</em></p>
					</div>
					<div class="brand">
						<div class="badge">6</div>
					</div>
				</div>
				<div id="stateb7" class="tile bg-color-red state" relay="7">
					<div class="tile-content">
						<h3>Seven</h2>
						<h4>Current state: <span id="stater7">Off</span></h4>
						<p><em>Disconnected</em></p>
					</div>
					<div class="brand">
						<div class="badge">7</div>
					</div>
				</div>
				<div id="stateb8" class="tile bg-color-red state" relay="8">
					<div class="tile-content">
						<h3>Eight</h2>
						<h4>Current state: <span id="stater8">Off</span></h4>
						<p><em>Disconnected</em></p>
					</div>
					<div class="brand">
						<div class="badge">8</div>
					</div>
				</div>
				<div id="stateb9" class="tile bg-color-red state" relay="9">
					<div class="tile-content">
						<h3>Nine</h2>
						<h4>Current state: <span id="stater9">Off</span></h4>
						<p><em>Disconnected</em></p>
					</div>
					<div class="brand">
						<div class="badge">9</div>
					</div>
				</div>
				<div id="stateb10" class="tile bg-color-red state" relay="10">
					<div class="tile-content">
						<h3>Ten</h2>
						<h4>Current state: <span id="stater10">Off</span></h4>
						<p><em>Disconnected</em></p>
					</div>
					<div class="brand">
						<div class="badge">10</div>
					</div>
				</div>
				<div id="stateb11" class="tile bg-color-red state" relay="11">
					<div class="tile-content">
						<h3>Eleven</h2>
						<h4>Current state: <span id="stater11">Off</span></h4>
						<p><em>Disconnected</em></p>
					</div>
					<div class="brand">
						<div class="badge">11</div>
					</div>
				</div>
				<div id="stateb12" class="tile bg-color-red blarg" professor="12">
					<div class="tile-content">
						<h3>Twelve</h2>
						<h4>Current state: <span id="stater12">Off</span></h4>
						<p><em>Disconnected</em></p>
					</div>
					<div class="brand">
						<div class="badge">12</div>
					</div>
				</div>
				<div id="stateb13" class="tile bg-color-red blarg" professor="13">
					<div class="tile-content">
						<h3>Thirteen</h2>
						<h4>Current state: <span id="stater13">Off</span></h4>
						<p><em>Disconnected</em></p>
					</div>
					<div class="brand">
						<div class="badge">13</div>
					</div>
				</div>
				<div id="stateb14" class="tile bg-color-red">
					<div class="tile-content">
						<h3>Fourteen</h2>
						<h4>Current state: <span id="stater14">Off</span></h4>
						<p><em>Disconnected</em></p>
					</div>
					<div class="brand">
						<div class="badge">14</div>
					</div>
				</div>
				<div id="stateb15" class="tile bg-color-red blarg" professor="15">
					<div class="tile-content">
						<h3>Fifteen</h2>
						<h4>Current state: <span id="stater15">Off</span></h4>
						<p><em>Disconnected</em></p>
					</div>
					<div class="brand">
						<div class="badge">15</div>
					</div>
				</div>
				<div id="stateb16" class="tile bg-color-red blarg" professor="sixteen">
					<div class="tile-content state" relay="16">
						<h3>Sixteen</h2>
						<h4>Current state: <span id="stater16">Off</span></h4>
						<p><em>Disconnected</em></p>
					</div>
					<div class="brand">
						<div class="badge">16</div>
					</div>
				</div>
				<div class="tile bg-color-pinkDark state" id="stateb0" relay="0">
					<div class="tile-content">
						<h3>All On</h2>
						<h4>Turn all relays on</h4>
					</div>
				</div>
				<div class="tile bg-color-pinkDark state" id="stateb998" relay="998">
					<div class="tile-content">
						<h3>All Off</h2>
						<h4>Turn all relays off</h4>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="page">	
	<div class="nav-bar">
		<div class="nav-bar-inner padding10">
			<span class="element">
				Copyright &copy;2009-2013 LG Coding
			</span>
			<span class="divider"></span>
			<ul class="menu">
				<li><a href="#">Sitemap</a></li>
				<li class="divider"></li>
				<li><a href="#">Privacy Policy</a></li>
				<li><a href="#">Terms and Conditions of Use</a></li>
				<li class="divider"></li>
				<li><a href="http://www.localghost.com.au">localghost.com.au</a></li>
				<li><a href="http://metroui.org.ua">Styled with Metro UI CSS</a></li>
			</ul>
		</div>
	</div>
</div>
</body>

<script>
var socket = io.connect(window.location.href);
socket.on("connect", function() {
        socket.send("status");
        var eventTime = new Date();
        var eventTimeStr = eventTime.getHours()+":"+eventTime.getMinutes()+":"+eventTime.getSeconds()+" "+eventTime.getDate()+"/"+eventTime.getMonth()+"/"+eventTime.getFullYear();
        $("#txtConnectionStatus").html("Connected to server "+eventTimeStr+".");
});
socket.on("disconnect", function() {
        var eventTime = new Date();
        var eventTimeStr = eventTime.getHours()+":"+eventTime.getMinutes()+":"+eventTime.getSeconds()+" "+eventTime.getDate()+"/"+eventTime.getMonth()+"/"+eventTime.getFullYear();
        $("#txtConnectionStatus").html("Disconnected from server ("+eventTimeStr+"), retrying ...");
});
socket.on("statusUpdate", function (data) {
    var eventTime = new Date();
    var eventTimeStr = eventTime.getHours()+":"+eventTime.getMinutes()+":"+eventTime.getSeconds()+" "+eventTime.getDate()+"/"+eventTime.getMonth()+"/"+eventTime.getFullYear();
// data should be a string of 16 0"s or 1"s.
// These represent a relay"s state: 0 for off and 1 for on.
    var d=data.split("");   // get each char into the array
    for(var i=0;i<=d.length;i++) {
		var dtext, dclass;
		if(d[i]=="1") {
			$("#stateb"+(i+1)).removeClass("bg-color-red bg-color-blue").addClass("bg-color-blue");
			$("#stater"+(i+1)).html("on");
		} else {
			$("#stateb"+(i+1)).removeClass("bg-color-red bg-color-blue").addClass("bg-color-red");
			$("#stater"+(i+1)).html("off");
		}
	}
	$("#txtStatusMessage").html("Last status received " + eventTimeStr + ".");
});
$("#statuscheck").click(function() {
        socket.send("status");
});
$(".state").click(function() {
		var getRelay = $(this).attr("relay");
        socket.send(getRelay);
		alert(getRelay);
});
$(".checkControl").change(function() {
	alert("this");
});
</script>
</html>
